
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML is auto-generated from an M-file.
To make changes, update the M-file and republish this document.
      --><title>test_helpspgl1</title><meta name="generator" content="MATLAB 7.10"><meta name="date" content="2012-05-28"><meta name="m-file" content="test_helpspgl1"><style type="text/css">

body {
  background-color: white;
  margin:10px;
}

h1 {
  color: #990000; 
  font-size: x-large;
}

h2 {
  color: #990000;
  font-size: medium;
}

/* Make the text shrink to fit narrow windows, but not stretch too far in 
wide windows. */ 
p,h1,h2,div.content div {
  max-width: 600px;
  /* Hack for IE6 */
  width: auto !important; width: 600px;
}

pre.codeinput {
  background: #EEEEEE;
  padding: 10px;
}
@media print {
  pre.codeinput {word-wrap:break-word; width:100%;}
} 

span.keyword {color: #0000FF}
span.comment {color: #228B22}
span.string {color: #A020F0}
span.untermstring {color: #B20000}
span.syscmd {color: #B28C00}

pre.codeoutput {
  color: #666666;
  padding: 10px;
}

pre.error {
  color: red;
}

p.footer {
  text-align: right;
  font-size: xx-small;
  font-weight: lighter;
  font-style: italic;
  color: gray;
}

  </style></head><body><div class="content"><h2>Contents</h2><div><ul><li><a href="#2">problem setting</a></li><li><a href="#3">spgl1</a></li><li><a href="#4">pqnl1</a></li></ul></div><pre class="codeinput"><span class="comment">% this script is to test whether current version of pqnl1 can solve problem</span>
<span class="comment">% in spgl1's example.</span>

<span class="comment">% addpath for pqnl1_2 working</span>
addpath(genpath(<span class="string">'./pqnl1'</span>));
</pre><h2>problem setting<a name="2"></a></h2><pre class="codeinput">m = 120; n = 512; k = 20; <span class="comment">% m rows, n cols, k nonzeros.</span>
p = randperm(n); x0 = zeros(n,1); x0(p(1:k)) = sign(randn(k,1));
A  = randn(m,n); [Q,R] = qr(A',0);  A = Q';
b  = A*x0 + 0.005 * randn(m,1);
opts = spgSetParms(<span class="string">'optTol'</span>,1e-4,<span class="string">'iterations'</span>,200);
</pre><h2>spgl1<a name="3"></a></h2><pre class="codeinput">[x_spg,r_spg,g_spg,info_spg] = spgl1(A, b, 0, 1e-3, [], opts); <span class="comment">% Find BP sol'n.</span>
</pre><pre class="codeoutput">
 ================================================================================
 SPGL1  v. 1017  (Mon, 16 Jun 2008)
 ================================================================================
 No. rows              :      120      No. columns           :      512
 Initial tau           : 0.00e+000      Two-norm of b         : 2.40e+000
 Optimality tol        : 1.00e-004      Target objective      : 1.00e-003
 Basis pursuit tol     : 1.00e-006      Maximum iterations    :      200

  Iter      Objective   Relative Gap  Rel Error      gNorm   stepG    nnzX    nnzG            tau
     0  2.4048419e+000  0.0000000e+000  1.00e+000  4.999e-001     0.0       0       0  1.1563826e+001
     1  1.3087890e+000  1.2978633e+000  9.99e-001  2.299e-001    -0.6     157       1
     2  1.1745541e+000  7.7456210e-001  9.99e-001  1.819e-001     0.0     104       1
     3  1.0040565e+000  4.2564974e-001  9.99e-001  1.329e-001     0.0      37       1
     4  9.7857631e-001  6.6776253e-001  9.78e-001  1.727e-001     0.0      25       1
     5  9.6013840e-001  3.7508171e-001  9.59e-001  1.356e-001     0.0      20       1
     6  9.5441014e-001  6.2362588e-002  9.53e-001  1.133e-001     0.0      21       1
     7  9.5404797e-001  3.0590369e-002  9.53e-001  1.107e-001     0.0      21       1
     8  9.5398908e-001  7.9543031e-003  9.53e-001  1.090e-001     0.0      20      16
     9  9.5397523e-001  4.5045960e-003  9.53e-001  1.088e-001     0.0      20      20  1.9921857e+001
    10  3.4612198e-001  1.5243644e+000  3.45e-001  6.879e-002     0.0      49       0
    11  2.3339561e-001  3.5351856e-001  2.32e-001  4.024e-002     0.0     167       1
    12  1.5727633e-001  1.9839624e-001  1.56e-001  2.049e-002     0.0     174       1
    13  1.4338987e-001  1.0264154e-001  1.42e-001  1.671e-002     0.0     150       4
    14  1.3044742e-001  9.6607326e-002  1.29e-001  1.570e-002     0.0     124       2
    15  1.0174955e-001  7.7347770e-002  1.01e-001  1.272e-002     0.0      96       3
    16  1.1379740e-001  2.3020846e-001  1.13e-001  1.708e-002    -0.3      90       2
    17  1.0692926e-001  1.6818499e-001  1.06e-001  1.747e-002     0.0     118       3
    18  8.1482696e-002  6.6015633e-002  8.05e-002  1.018e-002     0.0     121       2
    19  7.7729356e-002  4.2575474e-002  7.67e-002  8.936e-003     0.0     110       3
    20  7.4541136e-002  3.8476957e-002  7.35e-002  8.403e-003     0.0     101       5
    21  5.6611794e-002  4.5614135e-002  5.56e-002  6.812e-003     0.0      76       2
    22  6.2077626e-002  9.9404942e-002  6.11e-002  9.331e-003    -0.6      82       1
    23  6.1333303e-002  1.2225881e-001  6.03e-002  1.061e-002     0.0     101       1
    24  4.8542349e-002  2.4352902e-002  4.75e-002  5.346e-003     0.0     104      12
    25  4.7009868e-002  1.8357990e-002  4.60e-002  4.901e-003     0.0      95      14
    26  4.5865979e-002  1.7910194e-002  4.49e-002  4.729e-003     0.0      92      13
    27  3.9518553e-002  1.6428261e-002  3.85e-002  3.856e-003     0.0      70      30
    28  4.0783781e-002  5.3585354e-002  3.98e-002  5.763e-003    -0.6      80       1
    29  3.9567510e-002  3.1321236e-002  3.86e-002  4.567e-003     0.0      83      14
    30  3.7337103e-002  1.3486851e-002  3.63e-002  3.623e-003     0.0      82      51
    31  3.7074055e-002  6.1193464e-003  3.61e-002  3.208e-003     0.0      80      80
    32  3.6850580e-002  5.8334678e-003  3.59e-002  3.156e-003     0.0      78      78
    33  3.5912537e-002  6.3113102e-003  3.49e-002  3.000e-003     0.0      73      73
    34  3.6124576e-002  2.5514259e-002  3.51e-002  3.999e-003    -0.6      78      14
    35  3.5926346e-002  1.6033521e-002  3.49e-002  3.533e-003     0.0      74      45
    36  3.5600794e-002  4.2715691e-003  3.46e-002  2.904e-003     0.0      75      75
    37  3.5570269e-002  3.9486475e-003  3.46e-002  2.884e-003     0.0      76      76
    38  3.5513452e-002  3.6633402e-003  3.45e-002  2.860e-003     0.0      76      76
    39  3.5488089e-002  7.6614506e-003  3.45e-002  3.045e-003     0.0      66      65
    40  3.5514671e-002  1.4521315e-002  3.45e-002  3.340e-003    -0.6      69      61
    41  3.5375996e-002  2.9067563e-003  3.44e-002  2.806e-003     0.0      68      68
    42  3.5364548e-002  1.0513845e-003  3.44e-002  2.699e-003     0.0      69      69
    43  3.5363020e-002  8.8370480e-004  3.44e-002  2.691e-003     0.0      68      68  2.0373359e+001
    44  1.5280919e-002  4.5702589e-002  1.43e-002  1.933e-003     0.0     109       1
    45  8.5900021e-003  7.0000527e-003  7.59e-003  9.413e-004     0.0     145     136
    46  6.7941355e-003  6.3989307e-003  5.79e-003  6.492e-004     0.0     128     128
    47  6.4325701e-003  4.5121108e-003  5.43e-003  5.742e-004     0.0     136     136
    48  5.8440999e-003  2.3453799e-003  4.84e-003  4.737e-004     0.0     143     143
    49  5.7539087e-003  5.4923426e-003  4.75e-003  5.900e-004     0.0     139     139
    50  6.2230144e-003  7.6963033e-003  5.22e-003  7.164e-004     0.0     139     139
    51  5.3624775e-003  2.5909251e-003  4.36e-003  4.652e-004     0.0     141     141
    52  5.1982377e-003  1.4484569e-003  4.20e-003  3.924e-004     0.0     142     142
    53  5.1542010e-003  1.1771504e-003  4.15e-003  3.791e-004     0.0     141     141
    54  4.9930036e-003  1.1974674e-003  3.99e-003  3.691e-004     0.0     138     138
    55  4.9681321e-003  5.9850125e-003  3.97e-003  6.128e-004    -0.3     136     136
    56  4.7777543e-003  3.8252746e-003  3.78e-003  4.664e-004    -0.6     137     137
    57  4.6009509e-003  1.0654835e-003  3.60e-003  3.467e-004     0.0     136     136
    58  4.5762913e-003  8.9961092e-004  3.58e-003  3.338e-004     0.0     134     134
    59  4.5320555e-003  1.0048168e-003  3.53e-003  3.362e-004     0.0     134     134
    60  4.4772640e-003  4.1491831e-003  3.48e-003  4.767e-004     0.0     129     129
    61  4.3679901e-003  2.8153286e-003  3.37e-003  4.286e-004    -0.9     129     129
    62  4.2329803e-003  9.8728936e-004  3.23e-003  3.204e-004     0.0     129     129
    63  4.2167814e-003  6.5010214e-004  3.22e-003  3.053e-004     0.0     129     129
    64  4.1988540e-003  6.0372863e-004  3.20e-003  3.015e-004     0.0     126     126
    65  4.1447941e-003  1.0061116e-003  3.14e-003  3.166e-004     0.0     127     127
    66  4.1805478e-003  2.5572210e-003  3.18e-003  3.892e-004    -0.6     126     126
    67  4.1261464e-003  1.3137641e-003  3.13e-003  3.347e-004     0.0     125     125
    68  4.1078535e-003  5.7522570e-004  3.11e-003  2.947e-004     0.0     126     126
    69  4.1035924e-003  5.4237608e-004  3.10e-003  2.932e-004     0.0     126     126
    70  4.0138578e-003  6.1462865e-004  3.01e-003  2.928e-004     0.0     121     121
    71  4.0246297e-003  1.4369772e-003  3.02e-003  3.344e-004    -1.2     120     120
    72  4.0160968e-003  1.7295828e-003  3.02e-003  3.443e-004     0.0     121     121
    73  3.9865679e-003  5.3076821e-004  2.99e-003  2.883e-004     0.0     119     119
    74  3.9832928e-003  4.2123447e-004  2.98e-003  2.817e-004     0.0     119     119
    75  3.9764082e-003  4.4505748e-004  2.98e-003  2.824e-004     0.0     119     119
    76  3.8971134e-003  1.4480672e-003  2.90e-003  3.257e-004    -0.3     119     119
    77  3.8970393e-003  1.9847104e-003  2.90e-003  3.547e-004    -1.5     119     119  2.0405186e+001
    78  1.9537644e-003  1.2517459e-003  9.54e-004  1.723e-004     0.0     120     120
    79  1.9037882e-003  5.8879255e-004  9.04e-004  1.434e-004     0.0     120     120
    80  1.8659316e-003  4.4962506e-004  8.66e-004  1.374e-004     0.0     120     120
    81  1.8285489e-003  6.1664941e-004  8.29e-004  1.466e-004     0.0     120     120
    82  1.8295037e-003  1.0364069e-003  8.30e-004  1.667e-004    -0.3     120     120
    83  1.8022246e-003  4.6036256e-004  8.02e-004  1.373e-004     0.0     120     120
    84  1.7932076e-003  2.2125283e-004  7.93e-004  1.260e-004     0.0     120     120
    85  1.7900023e-003  2.3978259e-004  7.90e-004  1.266e-004     0.0     120     120
    86  1.7763554e-003  2.8775560e-004  7.76e-004  1.289e-004     0.0     120     120
    87  1.7786239e-003  6.2495490e-004  7.79e-004  1.448e-004    -0.6     120     120
    88  1.7750052e-003  6.9816736e-004  7.75e-004  1.490e-004     0.0     121     121
    89  1.7659404e-003  2.1309847e-004  7.66e-004  1.250e-004     0.0     120     120
    90  1.7646432e-003  2.0805698e-004  7.65e-004  1.246e-004     0.0     120     120
    91  1.7584358e-003  1.8297301e-004  7.58e-004  1.231e-004     0.0     120     120
    92  1.7477504e-003  6.0694269e-004  7.48e-004  1.439e-004    -0.6     121     121
    93  1.7562807e-003  1.0197457e-003  7.56e-004  1.636e-004    -0.9     120     120
    94  1.7345890e-003  1.9372959e-004  7.35e-004  1.221e-004     0.0     121     121
    95  1.7333647e-003  1.6974169e-004  7.33e-004  1.213e-004     0.0     121     121
    96  1.7316722e-003  1.7225950e-004  7.32e-004  1.214e-004     0.0     121     121
    97  1.7060319e-003  9.1231009e-004  7.06e-004  1.550e-004     0.0     121     121
    98  1.6990057e-003  6.1677176e-004  6.99e-004  1.436e-004    -1.5     121     121
    99  1.6900450e-003  2.1125476e-004  6.90e-004  1.225e-004     0.0     121     121
   100  1.6883475e-003  1.1662052e-004  6.88e-004  1.174e-004     0.0     121     121
   101  1.6866916e-003  1.1183099e-004  6.87e-004  1.170e-004     0.0     122     122
   102  1.6789938e-003  2.6720932e-004  6.79e-004  1.225e-004     0.0     122     122
   103  1.6785490e-003  3.5374756e-004  6.79e-004  1.278e-004    -0.9     122     122
   104  1.6752273e-003  1.7636770e-004  6.75e-004  1.182e-004     0.0     122     122
   105  1.6742023e-003  1.2309515e-004  6.74e-004  1.159e-004     0.0     122     122
   106  1.6732468e-003  1.2619450e-004  6.73e-004  1.160e-004     0.0     122     122
   107  1.6605867e-003  3.8641670e-004  6.61e-004  1.299e-004     0.0     122     122
   108  1.6706053e-003  9.7047257e-004  6.71e-004  1.543e-004    -1.2     122     122
   109  1.6544148e-003  1.2582731e-004  6.54e-004  1.158e-004     0.0     122     122
   110  1.6536488e-003  7.5569213e-005  6.54e-004  1.130e-004     0.0     122     122
   111  1.6528843e-003  7.3587961e-005  6.53e-004  1.128e-004     0.0     122     122
   112  1.6398773e-003  2.5358447e-004  6.40e-004  1.194e-004     0.0     122     122
   113  1.6535797e-003  8.2660809e-004  6.54e-004  1.521e-004    -0.9     122     122
   114  1.6357184e-003  2.8208392e-004  6.36e-004  1.213e-004    -0.3     122     122
   115  1.6335708e-003  7.8728173e-005  6.34e-004  1.121e-004     0.0     122     122
   116  1.6330496e-003  7.6311381e-005  6.33e-004  1.118e-004     0.0     122     122
   117  1.6299822e-003  1.4764052e-004  6.30e-004  1.148e-004     0.0     121     121
   118  1.6309603e-003  3.6995009e-004  6.31e-004  1.252e-004    -0.3     121     121
   119  1.6287569e-003  3.4960686e-004  6.29e-004  1.257e-004    -0.3     121     121
   120  1.6257658e-003  1.1884538e-004  6.26e-004  1.131e-004     0.0     121     121
   121  1.6251433e-003  7.4944864e-005  6.25e-004  1.111e-004     0.0     121     121
   122  1.6245974e-003  8.9535757e-005  6.25e-004  1.117e-004     0.0     121     121
   123  1.6187850e-003  2.7571559e-004  6.19e-004  1.209e-004     0.0     120     120
   124  1.6209473e-003  5.0067596e-004  6.21e-004  1.299e-004    -1.2     120     120
   125  1.6159139e-003  1.0845313e-004  6.16e-004  1.122e-004     0.0     120     120
   126  1.6154309e-003  8.7711156e-005  6.15e-004  1.109e-004     0.0     120     120
   127  1.6149460e-003  8.4955165e-005  6.15e-004  1.108e-004     0.0     120     120
   128  1.5910469e-003  3.8336055e-004  5.91e-004  1.227e-004     0.0     117     117
   129  1.6073496e-003  9.1097393e-004  6.07e-004  1.515e-004    -1.8     117     117
   130  1.5869988e-003  2.8251624e-004  5.87e-004  1.179e-004     0.0     117     117
   131  1.5852523e-003  6.1750126e-005  5.85e-004  1.076e-004     0.0     117     117
   132  1.5849658e-003  6.4874609e-005  5.85e-004  1.077e-004     0.0     117     117
   133  1.5795208e-003  1.2153450e-004  5.80e-004  1.104e-004     0.0     117     117
   134  1.5811348e-003  4.1919244e-004  5.81e-004  1.231e-004    -0.9     117     117
   135  1.5817056e-003  3.5142150e-004  5.82e-004  1.227e-004     0.0     117     117
   136  1.5767774e-003  1.5236024e-004  5.77e-004  1.112e-004     0.0     117     117
   137  1.5761315e-003  7.8608170e-005  5.76e-004  1.077e-004     0.0     117     117
   138  1.5758535e-003  7.5859495e-005  5.76e-004  1.075e-004     0.0     117     117
   139  1.5723792e-003  1.2300400e-004  5.72e-004  1.097e-004     0.0     117     117
   140  1.5734050e-003  3.3100956e-004  5.73e-004  1.199e-004    -1.2     117     117
   141  1.5715728e-003  2.0085909e-004  5.72e-004  1.134e-004     0.0     117     117
   142  1.5707988e-003  6.5802645e-005  5.71e-004  1.068e-004     0.0     117     117
   143  1.5705986e-003  7.0200495e-005  5.71e-004  1.070e-004     0.0     117     117
   144  1.5674991e-003  6.8652489e-005  5.67e-004  1.068e-004     0.0     117     117
   145  1.5685516e-003  3.9875584e-004  5.69e-004  1.214e-004    -1.2     117     117
   146  1.5666101e-003  2.2129280e-004  5.67e-004  1.148e-004    -0.3     117     117
   147  1.5655373e-003  7.0543676e-005  5.66e-004  1.066e-004     0.0     117     117
   148  1.5653344e-003  6.3311341e-005  5.65e-004  1.063e-004     0.0     117     117
   149  1.5646833e-003  7.0219456e-005  5.65e-004  1.064e-004     0.0     117     117
   150  1.5646805e-003  4.3768804e-004  5.65e-004  1.254e-004    -0.3     116     116  2.0412229e+001
   151  1.3319392e-003  3.5553135e-003  3.32e-004  2.360e-004    -0.3     116     116
   152  1.1157361e-003  2.8386263e-004  1.16e-004  8.434e-005     0.0     117     117
   153  1.1056391e-003  1.9054062e-004  1.06e-004  7.898e-005     0.0     117     117
   154  1.1023515e-003  1.4334936e-004  1.02e-004  7.715e-005     0.0     117     117
   155  1.0992506e-003  1.0279084e-004  9.93e-005  7.603e-005     0.0     117     117

 EXIT -- Found a root

 Products with A     :     235        Total time   (secs) :     0.2
 Products with A'    :     156        Project time (secs) :     0.0
 Newton iterations   :       5        Mat-vec time (secs) :     0.0
 Line search its     :      79        Subspace iterations :       0

</pre><h2>pqnl1<a name="4"></a></h2><pre class="codeinput">[x_pqn,r_pqn,g_pqn,info_pqn] = pqnl1_2(A, b, 0, 1e-3, zeros(size(A,2),1), opts); <span class="comment">% Find BP sol'n.</span>
</pre><pre class="codeoutput">Error using ==&gt; spgSetParms at 110
Unrecognized parameter name 'Kaczmarz'.

Error in ==&gt; pqnl1_2 at 195
defaultopts = spgSetParms(...

Error in ==&gt; test_helpspgl1 at 18
[x_pqn,r_pqn,g_pqn,info_pqn] = pqnl1_2(A, b, 0, 1e-3, zeros(size(A,2),1), opts); % Find BP sol'n.
</pre><p class="footer"><br>
      Published with MATLAB&reg; 7.10<br></p></div><!--
##### SOURCE BEGIN #####
% this script is to test whether current version of pqnl1 can solve problem
% in spgl1's example.

% addpath for pqnl1_2 working
addpath(genpath('./pqnl1')); 

%% problem setting
m = 120; n = 512; k = 20; % m rows, n cols, k nonzeros.
p = randperm(n); x0 = zeros(n,1); x0(p(1:k)) = sign(randn(k,1));
A  = randn(m,n); [Q,R] = qr(A',0);  A = Q';
b  = A*x0 + 0.005 * randn(m,1);
opts = spgSetParms('optTol',1e-4,'iterations',200);

%% spgl1
[x_spg,r_spg,g_spg,info_spg] = spgl1(A, b, 0, 1e-3, [], opts); % Find BP sol'n.

%% pqnl1
[x_pqn,r_pqn,g_pqn,info_pqn] = pqnl1_2(A, b, 0, 1e-3, zeros(size(A,2),1), opts); % Find BP sol'n.
   
##### SOURCE END #####
--></body></html>